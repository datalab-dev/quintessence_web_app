<!doctype html>
<head>
    <title>Topic Model</title>
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css?family=Libre+Baskerville&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="./style/top_documents.css">
    <link rel="stylesheet" type="text/css" href="./style/style.css">
    <link rel="stylesheet" type="text/css" href="./style/sidebar.css">
    <link rel="stylesheet" type="text/css" href="./resources/jquery-ui.css">
    <link rel="stylesheet" type="text/css" href="./resources/selectize.css">

    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    <script type="text/javascript" src="./resources/selectize.js"></script>

    <script src="./js/init_documents_results.js"> </script>
    <script src="./js/update_ldapca.js"> </script>
    <script src="./js/get_subset.js"> </script>
    <script src="./js/get_meta.js"> </script>
    <script src="./js/get_full_document.js"> </script>
    <script src="./js/get_truncated_document.js"> </script>
    <script src="./js/get_topic_terms.js"> </script>
    <script src="./js/get_topic_documents.js"> </script>
    <script src="./js/get_topic_proportion.js"> </script>
    <script src="./js/get_ldapca.js"> </script>
    <script src="./js/plot_ldapca.js"> </script>
    <script src="./js/plot_topic_terms.js"> </script>
    <script src="./js/create_subset_options.js"> </script>
    <script src="./js/get_all_subset_options.js"> </script>
    <script>
	//$('#my_selectize_input')[0].selectize.items

	$(function() { 
	    $('#selected-keywords').selectize({
		plugins: ['remove_button'],
	    });
	});
$(function() { 
    $('#selected-authors').selectize({
	plugins: ['remove_button'],
    });
});
$(function() { 
    $('#selected-locations').selectize({
	plugins: ['remove_button'],
    });
});



$( function() {
    $( "#slider-range" ).slider({
	range: true,
	min: 1470,
	max: 1700,
	values: [ 1470, 1700 ],
	slide: function( event, ui ) {
	    $( "#amount" ).val( ui.values[ 0 ] + " - " + ui.values[ 1 ] );
	}
    });
    $( "#amount" ).val( $( "#slider-range" ).slider( "values", 0 ) +
	" - " + $( "#slider-range" ).slider( "values", 1 ) );
} );

    </script>
    <style> 
.ui-slider .ui-slider-handle {
    height: 25px;
    width: 5px;
    padding-left: 5px;
}
	#slider-range {
	    height: 100px;
	    width: 400px;
	    margin: 20px;
	}
  .ui-slider-range {
      background-color: #1f77b4;
      }
    </style>
</head>
<body onload="get_all_subset_options(); init_plot_ldapca(); get_topic_terms()">

    <!-- navigation bar-->
        <div id="nav-placeholder"></div>
	    <script>
			$("#nav-placeholder").load("nav.html",function(){
			    	      $('a[href$="' + location.pathname.split("/")[1] + '"]').addClass('active');
			    	});
	//    );
    </script>
    

    <!-- SIDEBAR -->
    <div id="mySidebar" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
    <div id="subset_corpus"> 
	<p style="color: white">
	These categories have all been identified and hand-tagged by the EEBO-TCP team. You can filter the corpus by any combination of parameters. The topic model will be updated to reflect the distribution of topics in the subset you have selected. In addition, you can open the full documents below.
	</p>
	 <h2> Define Subset </h2>

	<!-- Timeline-->
	<div class="subsetter" id="Time"> 
	    <h3 style="margin-top: 10px" class="selecter-title"> Dates Range </h3>
	    <div style="height: 20px; width:80%" id="slider-range"></div>
	    <p style="width: 20%">
	    <input type="text" id="amount" style="background-color: #242729; font-size: 16px; border:0; color:#f4f4f4; font-weight:bold">
	    </p>
	</div>
	<!-- /Timeline-->

	<!-- /Keywords -->
	<div class="subsetter" id="Keywords"> 
	    <h3 class="selecter-title"> Keywords </h3>
	    <select class="selecter" id="selected-keywords" multiple="multiple">
		<option value="Broadsides">Broadsides</option>
	    </select>
	</div>
	<!-- /Keywords -->


	<!-- Authors -->
	<div class="subsetter" id="Authors">
	    <h3 class="selecter-title"> Authors </h3>
	    <select class="selecter" id="selected-authors" multiple="multiple">
	    </select>
	</div>
	<!-- /Authors -->

	<!-- Locations -->
	<div class="subsetter" id="Locations"> 
	    <h3 class="selecter-title"> Locations </h3>
	    <select class="selecter" id="selected-locations" multiple="multiple">
	    </select>
	</div>
	<!-- /Locations -->

	<button type="button" class="subset_button" onclick="get_subset();"> get subset </button> 
    </div>

    <div id="corpus_info" style="width: 1000px; margin:auto; color: #f4f4f4">
	<!-- Subset Statistics (e.g ndocs, year distribution, author distriubiton, location distribution, keyword distribtution -->
	<div id="ndocs"> </div>
	<div id="year distribution"> </div>
	<div id="author distribution"> </div>
	<div id="keyword distribution"> </div>
	<div id="location distribution"> </div>
    </div>
    </div>

    <!-- SIDEBAR -->

    <div id="help_text" style="width: 1000px; margin:auto">
	A key element of our document explorer is the topic model, which is a programmatic method for identifying themes in a corpus by grouping words according to their co-occurrence. If words co-occur in some texts and not others, the model will associate those words and documents with a common topic. Each topic identified in this corpus is represented below as a bubble, sized according to the prevalence of that topic. Click or hover on a bubble for more information. 
    </div>

                <button style="margin-left: 200px" class="openbtn" onclick="openNav()">☰ Open Subset Controls</button>  
    <div id="lda_area" name="no_top_docs"> 
	<div id="ldapca"> </div>
	<div id="topic_terms" name="1"> </div>
  </div>

    <div id="main">
	 <h2> Documents For Subset </h2>
	<div id="top_docs"> </div>
    </div>


    <!--Footer -->
        <div id="footer-placeholder"></div>
	    <script>
			$("#footer-placeholder").load("footer.html");
	    </script>
    <!-- Footer -->


    <script>
    function openNav() {
      document.getElementById("mySidebar").style.width = "1200px";
        }

        function closeNav() {
          document.getElementById("mySidebar").style.width = "0";
            }
            </script>
</body>
